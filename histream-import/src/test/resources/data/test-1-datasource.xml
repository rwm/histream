<?xml version="1.0" encoding="UTF-8"?>
<datasource version="1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >
	<meta>
		<id>test-1</id>
		<etl-strategy>replace-source</etl-strategy>
	</meta>
	 
	<patient-table>
		<source xsi:type="plain-file">
			<url>test-1-patients.txt</url>
			<separator>\t</separator>
		</source>
		<idat>
			<patient-id>patid</patient-id>
			<given-name>vorname</given-name>
			<surname>nachname</surname>
			<birthdate format="d.M.u" na="">geburtsdatum</birthdate>
			<deathdate format="d.M.u" na="">verstorben</deathdate>
			<gender>geschlecht</gender>
			<ignore xsi:type="string">ignoriert1</ignore>
			<ignore xsi:type="string">patfakt1</ignore>
		</idat>
		<!-- for MDAT in patient table, use the same patient-table also as
		a visit table (visit date needed). the patient id can be re-used
		as visit id, or a constant visit ID can be used. -->
	</patient-table>
	<!-- optional -->
	<visit-table>
		<source xsi:type="plain-file">
			<url>test-1-visits.txt</url>
			<type>text/csv</type>
			<separator>\t</separator>
		</source>
		<idat>
			<patient-id>patid</patient-id>
			<visit-id>fallnr</visit-id>
			<start format="d.M.u[ H[:m[:s]]]" na="" truncate-to="year">start</start>
			<end format="d.M.u[ H[:m[:s]]]" na="">end</end>
		</idat>
		<mdat>
			<!-- in/out code -->
			<concept id="weight">
				<value xsi:type="string">gewicht</value>
				<!-- TODO: verify that na values are no allowed for concept start timestamps -->
				<start format="d.M.u[ H[:m[:s]]]" na="">start</start>
			</concept>
		</mdat>
	</visit-table>
	<wide-table>
		<source xsi:type="plain-file">
			<url>test-1-widetable.txt</url>
			<separator>\t</separator>
		</source>
		<idat>
			<patient-id>patid</patient-id>
			<visit-id>fallnr</visit-id>
		</idat>
		<mdat>
			<concept id="natrium">
				<value xsi:type="decimal">na</value>
				<start format="d.M.u[ H[:m[:s]]]">zeitpunkt</start>
				<unit constant-value="mmol/l" />
				<modifier id="other">
					<value xsi:type="string" constant-value=""/>
				</modifier>
			</concept>
			<concept id="kalium">
				<value xsi:type="decimal">k</value>
				<start format="d.M.u[ H[:m[:s]]]">zeitpunkt</start>
			</concept>
		</mdat>

	</wide-table>
	<eav-table>
		<source xsi:type="plain-file">
			<url>test-1-eavtable.txt</url>
			<separator>\t</separator>
		</source>
		<idat>
			<patient-id>patid</patient-id>
			<visit-id>event</visit-id>
			<ignore xsi:type="string">locat</ignore>
			<ignore xsi:type="string">user</ignore>
		</idat>
		<mdat>
			<concept>param</concept>
			<start format="u-M-d">start_ts</start>
			<end format="u-M-d" na="@">end</end>
			<!-- location -->
			<type>type</type>
			<value na="@">value</value>
			<unit na="@">unit</unit>
		</mdat>
	</eav-table>

</datasource>
